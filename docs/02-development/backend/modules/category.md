# ๐ ูุญุฏุฉ ุงููุฆุงุช (Category Module)

## ูุธุฑุฉ ุนุงูุฉ

ูุญุฏุฉ ุงููุฆุงุช ูุณุคููุฉ ุนู ุฅุฏุงุฑุฉ ูุฆุงุช ุงูููุชุฌุงุช ูู ุงููุธุงู. ุชููุฑ ูุฐู ุงููุญุฏุฉ ูุธุงู ูุฆุงุช ูุฑูู ูุณูุญ ุจุฅูุดุงุก ูุฆุงุช ุฑุฆูุณูุฉ ููุฆุงุช ูุฑุนูุฉุ ููุง ูุณุงุนุฏ ูู ุชูุธูู ุงูููุชุฌุงุช ุจุดูู ุฃูุถู.

### ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

- **ูุธุงู ูุฑูู**: ุฏุนู ุงููุฆุงุช ุงูุฑุฆูุณูุฉ ูุงููุฑุนูุฉ
- **ุฅุฏุงุฑุฉ ุงููุฆุงุช**: ุฅูุดุงุก ูุชุญุฏูุซ ูุญุฐู ุงููุฆุงุช
- **ุงูุจุญุซ ูุงูููุชุฑุฉ**: ุงูุจุญุซ ุนู ุงููุฆุงุช ุญุณุจ ุงูุญุงูุฉ
- **ุงูุฅุญุตุงุฆูุงุช**: ุฅุญุตุงุฆูุงุช ุดุงููุฉ ุนู ุงููุฆุงุช ูุงูููุชุฌุงุช

### ุงูุงุนุชูุงุฏูุงุช

- `PrismaService`: ูููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `ProductModule`: ููุชุญูู ูู ุงูููุชุฌุงุช ุงููุฑุชุจุทุฉ

---

## API Endpoints

### ุฅุฏุงุฑุฉ ุงููุฆุงุช

#### POST `/categories`
ุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ**: `products.create`

**Request Body**:
```json
{
  "name": "ุฅููุชุฑูููุงุช",
  "description": "ูุฆุฉ ุงูููุชุฌุงุช ุงูุฅููุชุฑูููุฉ",
  "parentId": null,
  "imageUrl": "https://example.com/images/electronics.jpg",
  "isActive": true
}
```

**Response** (201 Created):
```json
{
  "id": "clx1111111111",
  "name": "ุฅููุชุฑูููุงุช",
  "description": "ูุฆุฉ ุงูููุชุฌุงุช ุงูุฅููุชุฑูููุฉ",
  "parentId": null,
  "imageUrl": "https://example.com/images/electronics.jpg",
  "isActive": true,
  "createdAt": "2025-12-01T10:00:00.000Z",
  "updatedAt": "2025-12-01T10:00:00.000Z"
}
```

**ุงูุฃุฎุทุงุก ุงููุญุชููุฉ**:
- `404 Not Found`: ุงููุฆุฉ ุงูุฃุจ ุบูุฑ ููุฌูุฏุฉ (ุฅุฐุง ุชู ุชุญุฏูุฏ parentId)

---

#### GET `/categories`
ุงูุญุตูู ุนูู ุฌููุน ุงููุฆุงุช

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ**: `products.read`

**Query Parameters**:
- `includeInactive` (optional): ุชุถููู ุงููุฆุงุช ุบูุฑ ุงููุดุทุฉ (ุงูุชุฑุงุถู: false)

**Response** (200 OK):
```json
[
  {
    "id": "clx1111111111",
    "name": "ุฅููุชุฑูููุงุช",
    "description": "ูุฆุฉ ุงูููุชุฌุงุช ุงูุฅููุชุฑูููุฉ",
    "parentId": null,
    "imageUrl": "https://example.com/images/electronics.jpg",
    "isActive": true,
    "productCount": 50,
    "createdAt": "2025-01-01T00:00:00.000Z",
    "updatedAt": "2025-12-01T10:00:00.000Z"
  }
]
```

---

#### GET `/categories/root`
ุงูุญุตูู ุนูู ุงููุฆุงุช ุงูุฌุฐุฑ (ุงููุฆุงุช ุงูุฑุฆูุณูุฉ)

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ**: `products.read`

**Response** (200 OK):
```json
[
  {
    "id": "clx1111111111",
    "name": "ุฅููุชุฑูููุงุช",
    "description": "ูุฆุฉ ุงูููุชุฌุงุช ุงูุฅููุชุฑูููุฉ",
    "parentId": null,
    "isActive": true,
    "productCount": 50,
    "childrenCount": 3
  }
]
```

---

#### GET `/categories/stats`
ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ุงููุฆุงุช

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ**: `products.read`

**Response** (200 OK):
```json
{
  "totalCategories": 20,
  "activeCategories": 18,
  "inactiveCategories": 2,
  "rootCategories": 5,
  "subCategories": 15,
  "totalProducts": 500,
  "categoriesWithMostProducts": [
    {
      "id": "clx1111111111",
      "name": "ุฅููุชุฑูููุงุช",
      "productCount": 150
    }
  ]
}
```

---

#### GET `/categories/:id`
ุงูุญุตูู ุนูู ูุฆุฉ ุจุงููุนุฑู

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ**: `products.read`

**Response** (200 OK):
```json
{
  "id": "clx1111111111",
  "name": "ุฅููุชุฑูููุงุช",
  "description": "ูุฆุฉ ุงูููุชุฌุงุช ุงูุฅููุชุฑูููุฉ",
  "parentId": null,
  "imageUrl": "https://example.com/images/electronics.jpg",
  "isActive": true,
  "parent": null,
  "children": [
    {
      "id": "clx2222222222",
      "name": "ููุงุชู",
      "productCount": 30
    }
  ],
  "productCount": 50,
  "createdAt": "2025-01-01T00:00:00.000Z",
  "updatedAt": "2025-12-01T10:00:00.000Z"
}
```

**ุงูุฃุฎุทุงุก ุงููุญุชููุฉ**:
- `404 Not Found`: ุงููุฆุฉ ุบูุฑ ููุฌูุฏุฉ

---

#### GET `/categories/:id/subcategories`
ุงูุญุตูู ุนูู ุงููุฆุงุช ุงููุฑุนูุฉ

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ**: `products.read`

**Response** (200 OK):
```json
[
  {
    "id": "clx2222222222",
    "name": "ููุงุชู",
    "description": "ูุฆุฉ ุงูููุงุชู ุงูุฐููุฉ",
    "parentId": "clx1111111111",
    "isActive": true,
    "productCount": 30,
    "childrenCount": 0
  }
]
```

---

#### PATCH `/categories/:id`
ุชุญุฏูุซ ูุฆุฉ

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ**: `products.update`

**Request Body**:
```json
{
  "name": "ุฅููุชุฑูููุงุช - ูุญุฏุซ",
  "description": "ูุตู ูุญุฏุซ",
  "isActive": true
}
```

**Response** (200 OK):
```json
{
  "id": "clx1111111111",
  "name": "ุฅููุชุฑูููุงุช - ูุญุฏุซ",
  "description": "ูุตู ูุญุฏุซ",
  "updatedAt": "2025-12-01T11:00:00.000Z"
}
```

**ุงูุฃุฎุทุงุก ุงููุญุชููุฉ**:
- `404 Not Found`: ุงููุฆุฉ ุบูุฑ ููุฌูุฏุฉ

---

#### DELETE `/categories/:id`
ุญุฐู ูุฆุฉ

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ**: `products.delete`

**Response** (200 OK):
```json
{
  "message": "ุชู ุญุฐู ุงููุฆุฉ ุจูุฌุงุญ"
}
```

**ุงูุฃุฎุทุงุก ุงููุญุชููุฉ**:
- `404 Not Found`: ุงููุฆุฉ ุบูุฑ ููุฌูุฏุฉ
- `400 Bad Request`: ูุง ูููู ุญุฐู ุงููุฆุฉ ูุฃููุง ุชุญุชูู ุนูู ููุชุฌุงุช
- `400 Bad Request`: ูุง ูููู ุญุฐู ุงููุฆุฉ ูุฃููุง ุชุญุชูู ุนูู ูุฆุงุช ูุฑุนูุฉ

---

## DTOs (Data Transfer Objects)

### CreateCategoryDto
```typescript
{
  name: string;          // ุงุณู ุงููุฆุฉ (ูุทููุจุ ุญุฏ ุฃูุตู 255 ุญุฑู)
  description?: string;  // ูุตู ุงููุฆุฉ (ุงุฎุชูุงุฑู)
  parentId?: string;    // ูุนุฑู ุงููุฆุฉ ุงูุฃุจ (ุงุฎุชูุงุฑูุ UUID)
  imageUrl?: string;    // ุฑุงุจุท ุงูุตูุฑุฉ (ุงุฎุชูุงุฑู)
  isActive?: boolean;   // ุญุงูุฉ ุงููุดุงุท (ุงูุชุฑุงุถู: true)
}
```

**ููุงุนุฏ ุงูุชุญูู**:
- `name`: ูุทููุจุ ูุตุ ุญุฏ ุฃูุตู 255 ุญุฑู
- `description`: ุงุฎุชูุงุฑูุ ูุต
- `parentId`: ุงุฎุชูุงุฑูุ UUID ุตุญูุญ
- `imageUrl`: ุงุฎุชูุงุฑูุ ูุต
- `isActive`: ุงุฎุชูุงุฑูุ ูููุฉ ููุทููุฉ

---

### UpdateCategoryDto
```typescript
{
  name?: string;        // ุงุณู ุงููุฆุฉ
  description?: string;  // ูุตู ุงููุฆุฉ
  parentId?: string;    // ูุนุฑู ุงููุฆุฉ ุงูุฃุจ
  imageUrl?: string;    // ุฑุงุจุท ุงูุตูุฑุฉ
  isActive?: boolean;   // ุญุงูุฉ ุงููุดุงุท
}
```

**ููุงุนุฏ ุงูุชุญูู**:
- ุฌููุน ุงูุญููู ุงุฎุชูุงุฑูุฉ
- `parentId`: ุฅุฐุง ุชู ุชูููุฑูุ ูุฌุจ ุฃู ูููู UUID ุตุญูุญ

---

## ุงูุฎุฏูุงุช (Services)

### CategoryService

#### `create(createCategoryDto: CreateCategoryDto): Promise<Category>`
ุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ

**ุงููุนุงููุงุช**:
- `createCategoryDto`: ุจูุงูุงุช ุฅูุดุงุก ุงููุฆุฉ

**ุงููููุฉ ุงููุฑุฌุนุฉ**: ุงููุฆุฉ ุงููููุดุฃุฉ

**ุงูุงุณุชุซูุงุกุงุช**:
- `NotFoundException`: ุฅุฐุง ูุงูุช ุงููุฆุฉ ุงูุฃุจ ุบูุฑ ููุฌูุฏุฉ

---

#### `findAll(includeInactive: boolean = false): Promise<Category[]>`
ุงูุญุตูู ุนูู ุฌููุน ุงููุฆุงุช

**ุงููุนุงููุงุช**:
- `includeInactive`: ุชุถููู ุงููุฆุงุช ุบูุฑ ุงููุดุทุฉ

**ุงููููุฉ ุงููุฑุฌุนุฉ**: ูุตูููุฉ ูู ุงููุฆุงุช

---

#### `findRootCategories(): Promise<Category[]>`
ุงูุญุตูู ุนูู ุงููุฆุงุช ุงูุฌุฐุฑ

**ุงููููุฉ ุงููุฑุฌุนุฉ**: ูุตูููุฉ ูู ุงููุฆุงุช ุงูุฑุฆูุณูุฉ

---

#### `findOne(id: string): Promise<Category>`
ุงูุญุตูู ุนูู ูุฆุฉ ุจุงููุนุฑู

**ุงููุนุงููุงุช**:
- `id`: ูุนุฑู ุงููุฆุฉ

**ุงููููุฉ ุงููุฑุฌุนุฉ**: ุงููุฆุฉ

**ุงูุงุณุชุซูุงุกุงุช**:
- `NotFoundException`: ุฅุฐุง ูุงูุช ุงููุฆุฉ ุบูุฑ ููุฌูุฏุฉ

---

#### `findSubCategories(id: string): Promise<Category[]>`
ุงูุญุตูู ุนูู ุงููุฆุงุช ุงููุฑุนูุฉ

**ุงููุนุงููุงุช**:
- `id`: ูุนุฑู ุงููุฆุฉ ุงูุฃุจ

**ุงููููุฉ ุงููุฑุฌุนุฉ**: ูุตูููุฉ ูู ุงููุฆุงุช ุงููุฑุนูุฉ

---

#### `update(id: string, updateCategoryDto: UpdateCategoryDto): Promise<Category>`
ุชุญุฏูุซ ูุฆุฉ

**ุงููุนุงููุงุช**:
- `id`: ูุนุฑู ุงููุฆุฉ
- `updateCategoryDto`: ุจูุงูุงุช ุงูุชุญุฏูุซ

**ุงููููุฉ ุงููุฑุฌุนุฉ**: ุงููุฆุฉ ุงููุญุฏุซุฉ

**ุงูุงุณุชุซูุงุกุงุช**:
- `NotFoundException`: ุฅุฐุง ูุงูุช ุงููุฆุฉ ุบูุฑ ููุฌูุฏุฉ

---

#### `remove(id: string): Promise<void>`
ุญุฐู ูุฆุฉ

**ุงููุนุงููุงุช**:
- `id`: ูุนุฑู ุงููุฆุฉ

**ุงูุงุณุชุซูุงุกุงุช**:
- `NotFoundException`: ุฅุฐุง ูุงูุช ุงููุฆุฉ ุบูุฑ ููุฌูุฏุฉ
- `BadRequestException`: ุฅุฐุง ูุงูุช ุงููุฆุฉ ุชุญุชูู ุนูู ููุชุฌุงุช ุฃู ูุฆุงุช ูุฑุนูุฉ

---

#### `getCategoryStats(): Promise<CategoryStats>`
ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ุงููุฆุงุช

**ุงููููุฉ ุงููุฑุฌุนุฉ**: ุฅุญุตุงุฆูุงุช ุงููุฆุงุช

---

## ุงูุนูุงูุงุช (Relationships)

### ุงููุญุฏุงุช ุงููุฑุชุจุทุฉ

- **Product Module**: ุงููุฆุงุช ูุฑุชุจุทุฉ ุจุงูููุชุฌุงุช
- **Product Variant Module**: ุงูููุชุฌุงุช ูุฏููุง ูุชุบูุฑุงุช

### ุงูุชุจุนูุงุช

- `PrismaService`: ูููุตูู ุฅูู ุฌุฏุงูู `categories`, `products`

### ุงูุฌุฏุงูู ุงููุฑุชุจุทุฉ

- `categories`: ุฌุฏูู ุงููุฆุงุช ุงูุฑุฆูุณู
- `products`: ุฌุฏูู ุงูููุชุฌุงุช

---

## ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุฅูุดุงุก ูุฆุฉ ุฑุฆูุณูุฉ

```typescript
// Request
POST /categories
Authorization: Bearer <access_token>
{
  "name": "ููุงุจุณ",
  "description": "ูุฆุฉ ุงูููุงุจุณ ูุงูุฃุฒูุงุก",
  "isActive": true
}

// Response
{
  "id": "clx3333333333",
  "name": "ููุงุจุณ",
  "description": "ูุฆุฉ ุงูููุงุจุณ ูุงูุฃุฒูุงุก",
  "parentId": null,
  "isActive": true,
  "createdAt": "2025-12-01T10:00:00.000Z"
}
```

### ูุซุงู 2: ุฅูุดุงุก ูุฆุฉ ูุฑุนูุฉ

```typescript
// Request
POST /categories
Authorization: Bearer <access_token>
{
  "name": "ููุงุจุณ ุฑุฌุงููุฉ",
  "description": "ูุฆุฉ ุงูููุงุจุณ ุงูุฑุฌุงููุฉ",
  "parentId": "clx3333333333",
  "isActive": true
}

// Response
{
  "id": "clx4444444444",
  "name": "ููุงุจุณ ุฑุฌุงููุฉ",
  "description": "ูุฆุฉ ุงูููุงุจุณ ุงูุฑุฌุงููุฉ",
  "parentId": "clx3333333333",
  "isActive": true,
  "createdAt": "2025-12-01T10:00:00.000Z"
}
```

### ูุซุงู 3: ุงูุญุตูู ุนูู ุงููุฆุงุช ุงูุฌุฐุฑ

```typescript
// Request
GET /categories/root
Authorization: Bearer <access_token>

// Response
[
  {
    "id": "clx1111111111",
    "name": "ุฅููุชุฑูููุงุช",
    "productCount": 50,
    "childrenCount": 3
  },
  {
    "id": "clx3333333333",
    "name": "ููุงุจุณ",
    "productCount": 100,
    "childrenCount": 2
  }
]
```

---

## ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

### 404 Not Found - ุงููุฆุฉ ุบูุฑ ููุฌูุฏุฉ
**ุงูุณุจุจ**: ูุนุฑู ุงููุฆุฉ ุงููุฑุณู ุบูุฑ ููุฌูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุญู**: 
- ุงูุชุญูู ูู ุตุญุฉ ูุนุฑู ุงููุฆุฉ
- ุงุณุชุฎุฏุงู ูุนุฑู ูุฆุฉ ููุฌูุฏ

---

### 400 Bad Request - ูุง ูููู ุญุฐู ุงููุฆุฉ
**ุงูุณุจุจ**: ุงููุฆุฉ ุชุญุชูู ุนูู ููุชุฌุงุช ุฃู ูุฆุงุช ูุฑุนูุฉ

**ุงูุญู**: 
- ุญุฐู ุฃู ููู ุงูููุชุฌุงุช ุฃููุงู
- ุญุฐู ุงููุฆุงุช ุงููุฑุนูุฉ ุฃููุงู
- ุฃู ุฅูุบุงุก ุชูุนูู ุงููุฆุฉ ุจุฏูุงู ูู ุญุฐููุง

---

**๐ ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ**: ุฏูุณูุจุฑ 2025
**๐จโ๐ป ุงููุทูุฑ**: ูุฑูู ุชุทููุฑ BThwani
**๐ ุฅุตุฏุงุฑ ุงููุญุฏุฉ**: v1.0.0

